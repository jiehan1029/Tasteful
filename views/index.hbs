<!DOCTYPE html>
<html lang="en">
<head>
<title>index page</title>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css" integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4" crossorigin="anonymous">
<link rel="stylesheet" href='./index.css'>
<!--
<link  href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.3.5/jquery.fancybox.min.css" rel="stylesheet">
-->
</head>
<body>

	<header class='container-fluid'>
		<nav class="navbar navbar-expand-lg navbar-light bg-light">
		  <div class="collapse navbar-collapse">
		    <ul class="navbar-nav">
		      <li class="nav-item">
		        <a class="nav-link" href="#">Login/Signup</a>
		      </li>
		      <li class="nav-item">
		        <a class="nav-link" href="#">My recipebook</a>
		      </li>
		    </ul>
		  </div>
		</nav>

		<h1 class='h1 text-center'>{{pageTitle}}</h1>
		<p class='lead text-center'>Create. Enjoy. Share.</p>
	</header>

	<main class='container-fluid'>

		<form method='POST' action='/recipes' class='row col-12 col-md-10 offset-md-1'>
			<label for='recipeSearchBox' class='col-12'>Get something tastful</label>
			<input id='recipeSearchBox' class="form-control col-xs-12 col-md-6" type='text' placeholder="cinnamon apple cake" name='query'>
			<div class='row col-xs-12 col-md-4'>
			<select class="form-control col" name='cuisine'>
				<option value=''>All cuisine</option>
				<option value='american'>American</option>
				<option value='caribean'>Caribean</option>
				<option value='chinese'>Chinese</option>
				<option value='french'>French</option>
				<option value='indian'>Indian</option>
				<option value='italian'>Italian</option>
				<option value='japanese'>Japanese</option>
				<option value='jewish'>Jewish</option>
				<option value='korean'>Korean</option>
				<option value='mexican'>Mexican</option>
				<option value='middle easter'>Middle Eastern</option>
				<option value='nordic'>Nordic</option>
				<option value='southern'>Southern</option>
				<option value='spanish'>Spanish</option>
				<option value='thai'>Thai</option>
				<option value='vietnamese'>Viewtnamese</option>
			</select>
			<select class="form-control col" name='type'>
				<option value=''>All types</option>
				<option value='appetizer'>Appetizer</option>
				<option value='bread'>Bread</option>
				<option value='breakfast'>Breakfast</option>
				<option value='dessert'>Dessert</option>
				<option value='main course'>Main course</option>
				<option value='salad'>Salad</option>
				<option value='sauce'>Sauce</option>
				<option value='side dish'>Side dish</option>
				<option value='soup'>Soup</option>
			</select>
			</div>
			<button type="submit" class="btn btn-primary col-md-2">Search</button>
		</form>

		<section class='searchSummary row col-12 col-md-10 offset-md-1 text-left'>
			<p>{{searchSummary}}</p>
		</section>
		
		<section class='searchResults row align-center col-12 col-md-10 offset-md-1'>
			{{#if searchDone}}
				{{#each searchResults}}
				<div class="card align-center col-12 col-sm-6 col-md-4 col-lg-3 " style="width: 18rem;">
				  <img class="card-img-top" src="https://spoonacular.com/recipeImages/{{image}}" alt="{{title}}">
				  <div class="card-body">
				    <h5 class="card-title">{{title}}</h5>
				    <p class="card-text">Ready in {{readyInMinutes}} minutes</p>
				    <p>Servings {{servings}} people</p>
				    <a class="btn btn-primary">Instructions</a>
				  </div>
				</div>

				{{/each}}
			{{/if}}
		</section>
		





<!--
		<section id='fb-recipeDetails' style='display:none'></section>
-->
	</main>
	<footer></footer>

	<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>	

<!--	
	<script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.3.5/jquery.fancybox.min.js"></script>
	
	<script>

	$('.searchResults').on('click','a',function(e){	
		e.stopPropagation();
		let recipeId=$(e.target).parent().attr('data-recipeId');
		const options={
			url:'/recipes/details',
			data:{recipeApiId:recipeId},
			type:'post',
			success:function(data){
				let detailsHtml=
					`<h3 class='recipeName'>${data.title}</h3>
					<div><img alt=${data.title} src=${data.image}></div>
					<div>YIELD: ${data.servings} servings</div>
					<div>Ready in ${data.readyInMinutes} minutes</div>
					<div>
						<h3>Ingredients</h3>
						<ul>
							{{#each extendedIngredients}}
							<li>{{originalString}}</li>
							{{/each}}
						</ul>
					</div>
					<div>
						<h3>Instructions</h3>
						${data.instructions}
					</div>`;

				$('#fb-recipeDetails').html(detailsHtml);
				$(e.target).parent().trigger('click');
			}
		};
		$.ajax(options);
	});

	</script>
-->
</body>
</html>